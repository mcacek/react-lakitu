!function e(t,a,r){function s(o,i){if(!a[o]){if(!t[o]){var c="function"==typeof require&&require;if(!i&&c)return c(o,!0);if(n)return n(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=a[o]={exports:{}};t[o][0].call(d.exports,function(e){var a=t[o][1][e];return s(a?a:e)},d,d.exports,e,t,a,r)}return a[o].exports}for(var n="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(e,t,a){var r=React.createClass({displayName:"AccessHolder",handleSubmit:function(e){e.preventDefault();var t=React.findDOMNode(this.refs.firstName).value.trim(),a=React.findDOMNode(this.refs.lastName).value.trim(),r=React.findDOMNode(this.refs.emailAddress).value.trim(),s=React.findDOMNode(this.refs.phoneNumber).value.trim(),n=React.findDOMNode(this.refs.cardNumber).value.trim(),o=React.findDOMNode(this.refs.expirationDate).value.trim();if(o&&t&&a){var i={firstName:t,lastName:a,emailAddress:r,phoneNumber:s,cards:[{cardNumber:n,formatName:"MNCC"}],endTime:o};this.props.onAccessHolderSubmit(i)}},render:function(){return React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("h2",null,"Access Holder"),React.createElement("p",null,React.createElement("input",{type:"text",required:"required",placeholder:"First Name",ref:"firstName"}),React.createElement("input",{type:"text",required:"required",placeholder:"Last Name",ref:"lastName"})),React.createElement("p",null,React.createElement("input",{type:"email",placeholder:"user@domain.com",ref:"emailAddress"}),React.createElement("input",{type:"tel",placeholder:"(###) ###-####",ref:"phoneNumber",pattern:"[(]{0,1}[0-9]{3}[)]{0,1}[-\\s\\.]{0,1}[0-9]{3}[-\\s\\.]{0,1}[0-9]{4}"})),React.createElement("p",null,React.createElement("input",{type:"text",required:"required",placeholder:"Fob Number",ref:"cardNumber"}),React.createElement("input",{type:"date",required:"required",placeholder:"Access Expiration Date",ref:"expirationDate"})),React.createElement("button",{type:"submit"},"Configure Access"))}});t.exports=r},{}],2:[function(e,t,a){var r=React.createClass({displayName:"ApiKeyForm",handleSubmit:function(e){e.preventDefault();var t=React.findDOMNode(this.refs.token).value.trim();t&&this.props.onApiKeySubmit(t)},render:function(){var e=this.props.access,t="api-key-"+e.success;return React.createElement("form",{className:t,onSubmit:this.handleSubmit},React.createElement("input",{className:e.success,type:"password",ref:"token",defaultValue:e.token}),React.createElement("button",{type:"submit"},"Update Key"))}});t.exports=r},{}],3:[function(e,t,a){var r=e("./DoorBox");React.render(React.createElement(r,{pollInterval:3e3,lakituUrl:"http://mncc.aaronzirbes.com:6590/"}),document.getElementById("app"))},{"./DoorBox":8}],4:[function(e,t,a){var r=React.createClass({displayName:"Cardholder",render:function(){var e=this.props.firstName;this.props.middleName&&(e=e+" "+this.props.middleName),this.props.lastName&&(e=e+" "+this.props.lastName);var t=[];return t.push(React.createElement("span",{key:"key",className:"key"},this.props.key)),e&&t.push(React.createElement("span",{key:"name",className:"name"},e)),this.props.email&&t.push(React.createElement("span",{key:"email",className:"email"},this.props.email)),this.props.phone&&t.push(React.createElement("span",{key:"phone",className:"phone"},this.props.phone)),React.createElement("div",{className:"cardholder"},t,React.createElement(Roles,{roles:this.props.roles}),React.createElement(Credentials,{credentials:this.props.credentials}))}});t.exports=r},{}],5:[function(e,t,a){var r=e("./Cardholder"),s=React.createClass({displayName:"Cardholders",render:function(){var e=this.props.cardholders.map(function(e){return React.createElement(r,{key:e.key,door:e.door,cardholderID:e.cardholderID,firstName:e.forename,middleName:e.middleName,lastName:e.surname,email:e.email,phone:e.phone,credentials:e.credentials,roles:e.roles})});return this.props.cardholders.length>0?React.createElement("div",{className:"cardholders"},e):React.createElement("span",null)}});t.exports=s},{"./Cardholder":4}],6:[function(e,t,a){var r=e("./debounce"),s=React.createClass({displayName:"CredentialSearch",handleChange:function(e){this.props.handleSearch(this.refs.query.getDOMNode().value)},componentWillMount:function(){this.lazyChange=r(this.handleChange,200,function(e){e.preventDefault()})},render:function(){return React.createElement("form",{className:"find-access"},React.createElement("h2",null,"Find Access Holders"),React.createElement("input",{type:"text",className:"cred-search",placeholder:"Search...",ref:"query",value:this.props.query,onChange:this.lazyChange}))}});t.exports=s},{"./debounce":14}],7:[function(e,t,a){var r=e("./DoorForm"),s=React.createClass({displayName:"Door",render:function(){var e=this.props.doorState,t="door-"+e.door;return React.createElement("div",{id:t,className:"door"},React.createElement("h2",{className:e.relayState},e.doorName),React.createElement(r,{doorKey:e.door,onDoorSubmit:this.props.onDoorSubmit}))}});t.exports=s},{"./DoorForm":9}],8:[function(e,t,a){var r=e("./AccessHolder"),s=e("./ApiKeyForm"),n=e("./Cardholders"),o=e("./CredentialSearch"),i=e("./DoorList"),c=e("./EventList"),l=e("./LakituResult"),d=React.createClass({displayName:"DoorBox",loadDoorsFromServer:function(){var e=this.props.lakituUrl+"doors",t=this.state.access.token;t&&$.getJSON(e,{access_token:t}).done(function(e){var t=this.mapToList(e,function(e){return e.door});this.apiTokenValid("valid"),this.setState({doors:t})}.bind(this)).fail(function(t,a,r){this.apiTokenValid("invalid"),console.error(e,a,r.toString())}.bind(this))},loadEventsFromServer:function(){var e=this.state.access.token,t=this.props.lakituUrl+"events";e&&$.getJSON(t,{access_token:e}).done(function(e){var t=this.mapToList(e,function(e){return e.timestamp+"@"+e.door});t.sort(function(e,t){return e.timestamp<t.timestamp?1:e.timestamp>t.timestamp?-1:0}),this.setState({events:t})}.bind(this)).fail(function(e,a,r){console.error(t,a,r.toString())}.bind(this))},findCardholders:function(e){if(e){var t=this.state.access.token,a=this.props.lakituUrl+"cardholders/find/"+e;t&&$.getJSON(a,{access_token:t}).done(function(e){var t=this.mapToList(e,function(e){return e.cardholderID+":"+e.door});t.sort(function(e,t){return e.forename+e.surname<t.forename+t.surname?-1:e.forename+e.surname>t.forename+t.surname?1:0}),this.setState({cardholders:t})}.bind(this)).fail(function(e,t,r){console.error(a,t,r.toString())}.bind(this))}},mapToList:function(e,t){var a=[];for(var r in e)if(e.hasOwnProperty(r)){var s=e[r];if("[object Array]"===Object.prototype.toString.call(s))for(var n in s){var o=s[n];o.door=r,o.key=t(o),a.push(o)}else s.door=r,s.key=t(s),a.push(s)}return a},handleDoorSubmit:function(e){var t=this.state.access.token,a=this.props.lakituUrl+"doors/"+e.action+"/"+e.door;this.clearMessageId(),$.post(a,{access_token:t}).done(function(e){this.setState({commandResult:e}),this.apiTokenValid("valid")}.bind(this)).fail(function(e,t,a){this.apiTokenValid("invalid")}.bind(this))},componentDidMount:function(){this.loadDoorsFromServer(),this.loadEventsFromServer(),setInterval(this.loadDoorsFromServer,this.props.pollInterval),setInterval(this.loadEventsFromServer,this.props.pollInterval)},handleAccessHolder:function(e){var t=this.state.access.token,a=this.props.lakituUrl+"access/?access_token="+t,r=JSON.stringify(e);this.clearMessageId(),$.ajax(a,{type:"POST",data:r,contentType:"application/json",success:function(e){this.setState({commandResult:e}),this.apiTokenValid("valid")}.bind(this),error:function(e,t,a){this.apiTokenValid("invalid")}.bind(this)})},render:function(){return React.createElement("div",{className:"doorBox"},React.createElement(l,{commandResult:this.state.commandResult}),React.createElement(s,{access:this.state.access,onApiKeySubmit:this.handleApiKeySubmit}),React.createElement(i,{doors:this.state.doors,onDoorSubmit:this.handleDoorSubmit}),React.createElement(c,{events:this.state.events}),React.createElement(r,{onAccessHolderSubmit:this.handleAccessHolder}),React.createElement(o,{handleSearch:this.findCardholders}),React.createElement(n,{cardholders:this.state.cardholders}))},handleApiKeySubmit:function(e){this.setState({access:{token:e,success:"unknown"}},function(){this.loadDoorsFromServer(),this.loadEventsFromServer()})},apiTokenValid:function(e){this.setState({access:{token:this.state.access.token,success:e}})},clearMessageId:function(){this.setState({commandResult:{messageId:"",md5OfMessageBody:this.state.commandResult.md5OfMessageBody}})},getInitialState:function(){return{access:{token:"",success:"unknown"},commandResult:{md5OfMessageBody:"",messageId:""},cardholders:[],doors:[],events:[]}}});t.exports=d},{"./AccessHolder":1,"./ApiKeyForm":2,"./Cardholders":5,"./CredentialSearch":6,"./DoorList":10,"./EventList":12,"./LakituResult":13}],9:[function(e,t,a){var r=React.createClass({displayName:"DoorForm",commandDoor:function(e,t){t.preventDefault(),this.props.onDoorSubmit({door:this.props.doorKey,action:e})},lock:function(e){this.commandDoor("lock",e)},unlock:function(e){this.commandDoor("unlock",e)},open:function(e){this.commandDoor("open",e)},render:function(){return React.createElement("div",{className:"doorButtons"},React.createElement("button",{type:"button",onClick:this.lock}," Lock"),React.createElement("button",{type:"button",onClick:this.unlock}," Unlock"),React.createElement("button",{type:"button",onClick:this.open}," Open"))}});t.exports=r},{}],10:[function(e,t,a){var r=e("./Door"),s=React.createClass({displayName:"DoorList",render:function(){var e=this.props.onDoorSubmit,t=this.props.doors.map(function(t){return React.createElement(r,{key:t.door,doorState:t,onDoorSubmit:e})});return React.createElement("div",{className:"doorList"},t)}});t.exports=s},{"./Door":7}],11:[function(e,t,a){var r=ReactIntl.IntlMixin,s=ReactIntl.FormattedRelative,n=React.createClass({displayName:"Event",mixins:[r],render:function(){var e=this.props.eventType;return this.props.firstName&&(e=this.props.firstName+" "+this.props.lastName),React.createElement("div",{className:"event"},React.createElement("span",{className:"door"}," ",this.props.door," "),React.createElement("span",{className:"desc"}," ",e," "),React.createElement("span",{className:"time"},React.createElement(s,{value:this.props.timestamp})))}});t.exports=n},{}],12:[function(e,t,a){var r=e("./Event"),s=React.createClass({displayName:"EventList",render:function(){var e=this.props.events.map(function(e){return React.createElement(r,{key:e.key,door:e.door,eventType:e.eventType,firstName:e.forename,lastName:e.surname,timestamp:e.timestamp})});return React.createElement("div",{className:"eventList"},e)}});t.exports=s},{"./Event":11}],13:[function(e,t,a){var r=React.createClass({displayName:"LakituResult",render:function(){var e=this.props.commandResult.messageId,t=this.props.commandResult.md5OfMessageBody,a="lakitu-empty",r="";return t&&(r="Last Message Sent: "),e&&(a="lakitu-updated"),React.createElement("div",{className:a},r,e)}});t.exports=r},{}],14:[function(e,t,a){var r=function(e,t){var a,r,s,n;return function(){s=this,r=[].slice.call(arguments,0),n=new Date;var o=function(){var i=new Date-n;t>i?a=setTimeout(o,t-i):(a=null,e.apply(s,r))};a||(a=setTimeout(o,t))}};t.exports=r},{}]},{},[3]);